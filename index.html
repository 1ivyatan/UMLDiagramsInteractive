<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="style.css">

    <style>
        .puzzle-canvas-styling {
            width: 640px;
            height: 480px;
        }

#container {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: space-around;
  background: white;
}

.column {
  border: 1px solid black;
  display: flex;
  flex-direction: column;
  padding: 8px 16px;
}

.draggable {
  border: 1px solid black;
  padding: 8px 16px;
  display: block;
  background: white;
}











    </style>

</head>
<body>
    https://sparxsystems.com/resources/tutorials/uml2/component-diagram.html
<div>
<p id="source" draggable="true">
  Select this element, drag it to the drop zone and thenreleasethe selection
  to move the element.
</p>
</div>
<div id="target">Drop Zone</div>

<button id="reset">Reset example</button>



<div class="static-diagram fixed-size" id="exampleDiagram">

    <div class="component-container" id="contOne">
        <div class="component-head">
            Component
        </div>
        <div class="component-body">
          App.jar
        </div>
    </div>

    <div class="component-container" style="left:250px; top: 15px;" id="contTwo">
        <div class="component-head">
            Component
        </div>
        <div class="component-body">
          App.jar
        </div>
    </div>

    <canvas>

    </canvas>
</div>

<script>
function drawLine(diagramId, divOne, divTwo) {
    const div = document.getElementById(diagramId);

    const conn1 = document.getElementById(divOne);
    const conn2 = document.getElementById(divTwo);
    const canvas = div.querySelector("canvas");


    conn1Coords = conn1.getBoundingClientRect();
    conn2Coords = conn2.getBoundingClientRect();

    conn1X = (conn1Coords.left + conn1Coords.right) / 2;
    conn1Y = conn1Coords.height / 2;

    conn2X = (conn2Coords.left + conn2Coords.right) / 2;
    conn2Y = (conn2Coords.top + conn2Coords.bottom) / 2;

    const ctx = canvas.getContext("2d");

    console.log(conn1Coords)
    console.log(conn1Coords.top + conn1Coords.bottom)

    ctx.beginPath();
    ctx.moveTo(conn1X, ( conn1Coords.top + conn1Coords.bottom ) / 2);
    ctx.lineTo(conn2X, conn2Coords.height / 2);
    ctx.stroke();

    console.log()
}

function setupDiagram(divId) {
    const div = document.getElementById(divId);
    const canvas = div.querySelector("canvas");

    canvas.width = div.clientWidth;
    canvas.height = div.clientHeight;
}

setupDiagram("exampleDiagram");

drawLine("exampleDiagram", "contOne", "contTwo");

</script>








<script>


const source = document.querySelector("#source");
source.addEventListener("dragstart", (ev) => {
  console.log("dragStart");
  // Change the source element's background color
  // to show that drag has started
  ev.currentTarget.classList.add("dragging");
  // Clear the drag data cache (for all formats/types)
  ev.dataTransfer.clearData();
  // Set the drag's format and data.
  // Use the event target's id for the data
  ev.dataTransfer.setData("text/plain", ev.target.id);
});
source.addEventListener("dragend", (ev) =>
  ev.target.classList.remove("dragging"),
);

const target = document.querySelector("#target");
target.addEventListener("dragover", (ev) => {
  console.log("dragOver");
  ev.preventDefault();
});
target.addEventListener("drop", (ev) => {
  console.log("Drop");
  ev.preventDefault();
  // Get the data, which is the id of the source element
  const data = ev.dataTransfer.getData("text");
  const source = document.getElementById(data);
  ev.target.appendChild(source);
});

const reset = document.querySelector("#reset");
reset.addEventListener("click", () => document.location.reload());



/*
document.querySelectorAll(".draggable").forEach((el) => {
    el.addEventListener("drop", (e) => {
        e.preventDefault();
    });
})

document.querySelectorAll(".droppable").forEach((el) => {
    el.addEventListener("drop", (e) => {
        e.preventDefault();
    });
})
    */
</script>

</body>
</html>